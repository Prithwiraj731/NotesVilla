<!DOCTYPE html>
<html>
<head>
    <title>Download Test</title>
</head>
<body>
    <h1>Download Endpoint Test</h1>
    
    <h2>Test with existing file:</h2>
    <a href="http://localhost:5000/api/notes/download/files-1756709354803-597255814.png?name=test.png" download>
        Download files-1756709354803-597255814.png
    </a>
    
    <h2>Test with non-existing file:</h2>
    <a href="http://localhost:5000/api/notes/download/files-1757352981310-636882371.jpg?name=test.jpg" download>
        Download files-1757352981310-636882371.jpg (should fail)
    </a>
    
    <script>
        // Test the download utility
        console.log('Testing download endpoint...');
        
        // Test with existing file
        fetch('http://localhost:5000/api/notes/download/files-1756709354803-597255814.png')
            .then(response => {
                console.log('Existing file response:', response.status, response.statusText);
                if (response.ok) {
                    console.log('✅ Download endpoint works for existing files');
                } else {
                    console.log('❌ Download endpoint failed for existing files');
                }
            })
            .catch(error => {
                console.error('❌ Network error:', error);
            });
            
        // Test with non-existing file
        fetch('http://localhost:5000/api/notes/download/files-1757352981310-636882371.jpg')
            .then(response => {
                console.log('Non-existing file response:', response.status, response.statusText);
                if (response.status === 404) {
                    console.log('✅ Download endpoint correctly returns 404 for missing files');
                } else {
                    console.log('❌ Download endpoint should return 404 for missing files');
                }
            })
            .catch(error => {
                console.error('❌ Network error:', error);
            });
    </script>
</body>
</html>